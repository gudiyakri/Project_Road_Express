<script src="/plugins/jquery/jquery.min.js"></script>
<script src="/js/plugins/moment.min.js"></script>
<script src="/plugins/bootstrap/js/popper.min.js"></script>
<script src="/plugins/bootstrap/js/bootstrap.min.js"></script>
<script src="/js/plugins/bootstrap-datetimepicker.js"></script>
<script src="/plugins/select2/dist/js/select2.full.min.js" type="text/javascript"></script>

<script src="/js/jquery.slimscroll.js"></script>
<script src="/js/waves.js"></script>
<script src="/js/sidebarmenu.js"></script>
<script src="/plugins/sticky-kit-master/dist/sticky-kit.min.js"></script>
<script src="/plugins/sweetalert2/dist/sweetalert2.all.min.js"></script>
<script src="/js/custom.min.js"></script>

<script src="/demo/demo.js"></script>
<script src="/demo/jquery.sharrre.js"></script>

<script src="/plugins/switchery/dist/switchery.min.js"></script>
<script src="/plugins/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js"></script>
<script src="/plugins/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.js" type="text/javascript"></script>
<script src="/plugins/dff/dff.js" type="text/javascript"></script>
<script type="text/javascript" src="/plugins/multiselect/js/jquery.multi-select.js"></script>

<script src="/plugins/datatables.net/js/jquery.dataTables.min.js"></script>

<script
	src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/js/standalone/selectize.min.js"
	integrity="sha256-+C0A5Ilqmu4QcSPxrlGpaZxJ04VjsRjKu+G82kl5UJk="
	crossorigin="anonymous"
></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/notify/0.4.2/notify.js"></script>

<script src="/plugins/styleswitcher/jQuery.style.switcher.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>
<script src="/plugins/datatables/responsive.bootstrap4.min.js"></script>
<script src="https://cdn.datatables.net/fixedheader/3.1.5/js/dataTables.fixedHeader.min.js"></script>
<script src="/plugins/daterangepicker/daterangepicker.js"></script>

<script>
	let audio = new Audio("/sounds/notification.mp3");

	let socket = io.connect();
	socket.on("driverAdded", function (data) {
		audio.play();
		Swal.fire("Driver", "New Driver Added", "success");
	});

	// socket.on("loadAdded", function (data) {
	// 	audio.play();
	// 	Swal.fire("Load", "New Load Added", "success");
	// 	checkLoad();
	// });

	// $(document).ready(function (event) {
	// 	offline();
	// 	setInterval("checkLoad()", 20000);
	// 	setInterval("offline()", 20000);
	// });

	// function checkLoad() {
	// 	$.ajax({
	// 		url: "/admin/checkLoad",
	// 		type: "post",
	// 		dataType: "json",
	// 		success: function (data) {
	// 			$("#loadMenu").empty();
	// 			$("#countLoad").empty();
	// 			$("#countLoad").append(data.length);
	// 			$(".menuBtn").effect(
	// 				"shake",
	// 				{
	// 					times: 4,
	// 				},
	// 				1000
	// 			);
	// 			for (let i = 0; i < data.length; i++) {
	// 				$.ajax({
	// 					url: "/admin/findLoad",
	// 					type: "post",
	// 					data: {
	// 						load: data[i],
	// 					},
	// 					dataType: "json",
	// 					success: function (data2) {
	// 						if (data2.code == 1) {
	// 							// audio.play();
	// 							var l = `<a href="/admin/placement"" class="placementLink" data-id = ${data2.result.load_id} style="background-color:yellow;"><div class="mail-contnet"><h5>${data2.result.name}</h5><span class="mail-desc">${data2.result.type}</span></div></a>`;
	// 							var html = `<div class="alert alert-warning"><h3 class="text-warning"><i class="fa fa-exclamation-triangle"></i> New Loads Incomming</h3><span data-notify-html='title'>${l}</span></div>`;
	// 							$("#defaultLoad").empty();
	// 							$("#loadMenu").append(html);
	// 						}
	// 					},
	// 				});
	// 			}
	// 		},
	// 	});
	// }

	function offline() {
		$.ajax({
			url: "/admin/offline",
			type: "post",
			dataType: "JSON",
			success: function (data) {
				if (data.code === 1) {
					for (let i = 0; i < data.data.length; i++) {
						let l = `<a href="#"><div class="mail-contnet"><h5>Driver : ${data.data[i].d_name} has not moved in 2 hrs.</h5><span class="mail-desc">Phone Number:${data.data[i].phn}</span><h5></div></a>`;
						$("#default").remove();
						$("#loadLink").append(l);
					}
				}
			},
		});
	}
</script>
